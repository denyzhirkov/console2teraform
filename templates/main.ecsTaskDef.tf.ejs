<% if (ecsTaskDefs && ecsTaskDefs.length) { %>
<% ecsTaskDefs.forEach(function(td) { %>
resource "aws_ecs_task_definition" "<%= td.resourceName %>" {
  family                   = "<%= td.family %>"
  container_definitions    = jsonencode(<%= JSON.stringify(td.containerDefinitions) %>)
<% if (td.requiresCompatibilities) { %>  requires_compatibilities = <%= JSON.stringify(td.requiresCompatibilities) %>
<% } %><% if (td.cpu) { %>  cpu    = "<%= td.cpu %>"
<% } %><% if (td.memory) { %>  memory = "<%= td.memory %>"
<% } %><% if (td.networkMode) { %>  network_mode = "<%= td.networkMode %>"
<% } %><% if (td.tags) { %>  tags = {
<% Object.entries(td.tags).forEach(([k, v]) => { %>    <%= k %> = "<%= v %>"
<% }) %>  }
<% } %>}
<% }) %>
<% } %> 