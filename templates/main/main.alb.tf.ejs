<% if (albs && albs.length) { %>
<% albs.forEach(function(alb) { %>
resource "aws_lb" "<%= alb.resourceName %>" {
  name               = var.<%= alb.resourceName %>_name
  load_balancer_type = "<%= alb.type %>"
  internal           = <%= alb.scheme === 'internal' ? 'true' : 'false' %>
  subnets            = [<%-(alb.subnets || []).map(s => `"${s}"`).join(', ') %>]
  security_groups    = [<%-(alb.securityGroups || []).map(sg => `"${sg}"`).join(', ') %>]
  tags = {
    Name = var.<%= alb.resourceName %>_name
<% if (alb.tags) { Object.entries(alb.tags).forEach(([k, v]) => { if (k !== 'Name') { %>    <%= k %> = "<%= v %>"
<% } }) } %>  }
}
<% }) %>
<% } %> 